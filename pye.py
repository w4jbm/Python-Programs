#!/usr/bin/env python3
#
# pye.py -- Calculate e (Euler's Number) to arbitrary length
#
# By Jim McClanahan W4JBM.
#
#

import sys
import time
import decimal as dc

if len(sys.argv) != 2:
    print('Calculate Euler\'s Number (e) to arbitrary length')
    print('USAGE: pye.py ndigits')
    sys.exit(1)

ndigits = int(sys.argv[1])

if ndigits > 1000:
    print('Results are unverified beyong 1,000 places')

pdigits = ndigits + 2 # number of digits to print

start_time = time.time()

# set the precision
dc.getcontext().prec = ndigits + 10

factorial = 1
euler = 2

# I need to do more testing to figure out what the limit
# of accuracy. I know that going to 500 is good to 1,000
# places, but not sure where it starts to fall apart.

for x in range(2, 500):
    factorial *= x
    euler += dc.Decimal(str(1.0))/dc.Decimal(str(factorial))

print('Calculation time was {:f} seconds. Result is:\n'.format(time.time() - start_time))

print(str(euler)[0:pdigits])



# e to 100  and 1000 decimal places included for
# verification and testing

"""
print('2.71828182845904523536028747135266249775724709369995\
95749669676277240766303535475945713821785251664274')
"""

"""
print('2.71828182845904523536028747135266249775724709369995\
95749669676277240766303535475945713821785251664274\
27466391932003059921817413596629043572900334295260\
59563073813232862794349076323382988075319525101901\
15738341879307021540891499348841675092447614606680\
82264800168477411853742345442437107539077744992069\
55170276183860626133138458300075204493382656029760\
67371132007093287091274437470472306969772093101416\
92836819025515108657463772111252389784425056953696\
77078544996996794686445490598793163688923009879312\
77361782154249992295763514822082698951936680331825\
28869398496465105820939239829488793320362509443117\
30123819706841614039701983767932068328237646480429\
53118023287825098194558153017567173613320698112509\
96181881593041690351598888519345807273866738589422\
87922849989208680582574927961048419844436346324496\
84875602336248270419786232090021609902353043699418\
49146314093431738143640546253152096183690888707016\
76839642437814059271456354906130310720851038375051\
01157477041718986106873969655212671546889570350354')
"""

sys.exit(0)

